"use strict";(self["webpackChunkswagger_mgr"]=self["webpackChunkswagger_mgr"]||[]).push([[255],{255:function(e,a,t){t.r(a),t.d(a,{default:function(){return l}});var s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"swagger-config-page"},[a("div",{staticClass:"btns"},[a("Button",{on:{click:e.toggleAddModal}},[e._v("添加Swagger配置")]),a("Button",{staticClass:"primary",on:{click:function(a){e.configModalVisible=!0}}},[e._v("编辑配置")])],1),a("Table",{attrs:{columns:e.columns,data:this.swaggerConfig}}),a("Modal",{attrs:{title:"swagger配置"},on:{"on-ok":e.onUpdateSwaggerConfig},model:{value:e.configModalVisible,callback:function(a){e.configModalVisible=a},expression:"configModalVisible"}},[a("div",{staticClass:"tip"},[e._v("swagger配置必须是有效的数组json字符串,包含apiUrl,swaggerWebsite,name三个字段且不能为空")]),a("Input",{attrs:{autosize:{maxRows:10},type:"textarea",placeholder:""},model:{value:e.swaggerJson,callback:function(a){e.swaggerJson=a},expression:"swaggerJson"}})],1),a("Modal",{attrs:{title:"添加swagger配置"},on:{"on-cancel":e.onModalCancel,"on-ok":e.onSave},model:{value:e.showAddModal,callback:function(a){e.showAddModal=a},expression:"showAddModal"}},[a("Form",{ref:"addForm",attrs:{autocomplete:"off",model:e.addForm,"label-width":120}},[a("FormItem",{attrs:{label:"swagger地址",prop:"swaggerWebsite"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.swaggerWebsite,callback:function(a){e.$set(e.addForm,"swaggerWebsite",a)},expression:"addForm.swaggerWebsite"}})],1),a("FormItem",{attrs:{label:"api地址",prop:"apiUrl"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.apiUrl,callback:function(a){e.$set(e.addForm,"apiUrl",a)},expression:"addForm.apiUrl"}})],1),a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.name,callback:function(a){e.$set(e.addForm,"name",a)},expression:"addForm.name"}})],1)],1)],1)],1)},o=[],r=t(3822),i={name:"",data(){return{showAddModal:!1,addForm:{},editFormIndex:"",columns:[{title:"名称",key:"name"},{title:"地址",key:"swaggerWebsite",render:(e,{row:{swaggerWebsite:a}})=>e("a",{domProps:{href:a,target:"_blank"}},a)},{title:"apidocs json",key:"apiUrl",render:(e,{row:{apiUrl:a}})=>e("a",{domProps:{href:a,target:"_blank"}},a)},{title:"操作",width:150,align:"center",render:(e,a)=>e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:()=>{this.deleteSwaggerConfig(a.index)}}},"删除"),e("Button",{props:{type:"primary",size:"small"},style:{"margin-left":"10px"},on:{click:()=>{this.addForm={...a.row},this.editFormIndex=a.index,this.showAddModal=!0}}},"编辑")])}],swaggerJson:"",configModalVisible:!1}},created(){},computed:{...(0,r.rn)({swaggerConfig:e=>e.app.swaggerConfig})},methods:{...(0,r.OI)("app",["deleteSwaggerConfig","updateSwaggerConfig"]),onUpdateSwaggerConfig(){if(this.swaggerJson)try{const e=JSON.parse(this.swaggerJson);if(!Array.isArray(e))return void this.$message.error("配置不是有效的数组Json字符串");let a=!0;if(e.forEach((e=>{e.swaggerWebsite&&e.apiUrl&&e.name||(a=!1)})),!a)return void this.$message.error("请检查配置设置是否完整");this.updateSwaggerConfig(e),this.$message.success("配置更新成功")}catch(e){this.$message.error("请检查配置是否是有效的Json字符串")}else this.$message.error("请输入swagger配置")},toggleAddModal(){this.addForm={},this.showAddModal=!this.showAddModal},...(0,r.OI)("app",["addSwaggerConfig","updateSingleSwaggerConfig"]),onSave(){this.editFormIndex?this.updateSingleSwaggerConfig({data:this.addForm,index:this.editFormIndex}):(this.addSwaggerConfig(this.addForm),this.showAddModal=!1,this.addForm={}),this.editFormIndex=""},onModalCancel(){this.editFormIndex=""}},watch:{configModalVisible(e){e&&(this.swaggerJson=JSON.stringify(this.swaggerConfig))}}},d=i,n=t(1001),g=(0,n.Z)(d,s,o,!1,null,"224b42e9",null),l=g.exports}}]);
//# sourceMappingURL=255.faedf412.js.map